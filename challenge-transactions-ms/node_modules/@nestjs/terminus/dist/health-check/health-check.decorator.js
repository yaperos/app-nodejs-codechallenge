"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HealthCheck = void 0;
const health_check_schema_1 = require("./health-check.schema");
// eslint-disable-next-line @typescript-eslint/no-empty-function
const noop = () => { };
function getSwaggerDefinitions(swagger) {
    const { ApiOkResponse, ApiServiceUnavailableResponse } = swagger;
    // Possible HTTP Status
    const ServiceUnavailable = ApiServiceUnavailableResponse({
        description: 'The Health Check is not successful',
        schema: (0, health_check_schema_1.getHealthCheckSchema)('error'),
    });
    const Ok = ApiOkResponse({
        description: 'The Health Check is successful',
        schema: (0, health_check_schema_1.getHealthCheckSchema)('ok'),
    });
    // Combine all the SwaggerDecorators
    return (target, key, descriptor) => {
        ServiceUnavailable(target, key, descriptor);
        Ok(target, key, descriptor);
    };
}
const HealthCheck = () => {
    let swagger = null;
    try {
        // Dynamically load swagger, in case it is not installed
        swagger = require('@nestjs/swagger');
    }
    catch (_a) { }
    if (swagger) {
        return getSwaggerDefinitions(swagger);
    }
    return noop;
};
exports.HealthCheck = HealthCheck;
